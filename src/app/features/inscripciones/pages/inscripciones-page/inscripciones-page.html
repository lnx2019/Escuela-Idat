<div class="inscripciones-list-container p-4">
  <header class="d-flex justify-content-between align-items-center mb-4">
    <h2>Listado de Inscripciones</h2>
    <button (click)="crear()" class="btn btn-primary">
      ➕ Nueva Inscripción
    </button>
  </header>

  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th>ID</th>
        <th>Estudiante</th>
        <th>Curso</th>
        <th>Fecha</th>
        <th class="text-end">Acciones / Modificar Estado</th> </tr>
    </thead>

    <tbody>
      @for (ins of inscripciones; track ins.id) {
        <tr>
          <td>{{ ins.id }}</td>
          <td>{{ ins.estudiante_nombre }}</td>
          <td>{{ ins.curso_titulo }}</td>
          <td>{{ ins.fecha_inscripcion | date:'short' }}</td>
          
          <td class="text-end">
            <select
              [ngModel]="ins.estado"
              (ngModelChange)="onEstadoChange(ins.id, $event)"
              class="form-select form-select-sm d-inline-block w-auto me-2" 
              [disabled]="cargando"
              style="min-width: 120px;" 
            >
              @for (estado of estadosPosibles; track estado) {
                <option [value]="estado">{{ estado | titlecase }}</option>
              }
            </select>

            <button class="btn btn-danger btn-sm" (click)="eliminar(ins.id)" [disabled]="cargando">
              Eliminar
            </button>
          </td>
        </tr>
      } @empty {
        <tr>
          <td colspan="5" class="text-center">No hay inscripciones registradas.</td>
        </tr>
      }
    </tbody>
  </table>

  @if (cargando) {
      <div class="text-center my-3">Cargando datos...</div>
  }
</div>